<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>Hibernate hello world application</title>
    <meta name="description" content="Programming is Magic - A place where I can share my thoughts about programming" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Programming is Magic" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Programming is Magic" />
    <meta property="og:description" content="A place where I can share my thoughts about programming" />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Programming is Magic" />
    <meta name="twitter:description" content="A place where I can share my thoughts about programming" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Programming is Magic",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "A place where I can share my thoughts about programming"
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Programming is Magic" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation">
            <a href="/">Home</a>
        </li>
        
        <li class="nav-javascript " role="presentation"><a href="/tag/javascript">JavaScript</a></li>
        <li class="nav-speeches " role="presentation"><a href="/tag/java">Java</a></li>

        <li class="nav-fiction " role="presentation"><a href="/tag/csharp">C#</a></li>
        
        <li class="nav-fiction " role="presentation"><a href="/tag/algorithms">Algorithms</a></li>


        <li class="nav-author " role="presentation">
            <a href="/author/mc">Author</a>
        </li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head  no-gradient" style="background-image: url(/assets/images/cover5.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/home.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-test tag-content">

        <header class="post-header">
            <h1 class="post-title">Hibernate hello world application</h1>
            <section class="post-meta">
            <!-- <a href='/'>marcin-chwedczuk</a> -->
            <time class="post-date" datetime="2016-06-22">22 Jun 2016</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/tag/java'>Java</a>,
                       
                
                    
                       <a href='/tag/hibernate'>Hibernate</a>
                       
                
                
            </section>
        </header>

        <section class="post-content">
            
            <p>In this tutorial we’ll create minimal application that will allow us 
to start playing with Hibernate ORM. I will present two hello world’s one for
vanilla Hibernate and one for Hibernate via JPA <a href="http://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate">(Java Persistence API)</a>.<br />
We will use:</p>

<ul>
  <li>Java 8 (with new <code class="highlighter-rouge">java.time</code> date time API)</li>
  <li>Hibernate 5</li>
  <li><a href="https://maven.apache.org/">Maven</a> as build tool</li>
  <li><a href="https://logging.apache.org/log4j/1.2">Log4j</a> to log executed SQL queries</li>
</ul>

<p>There is one more thing before we start - we need to setup database. I assume 
that you will be using PostgreSQL but you should have no trouble using
this tutorial with other databases like MySQL. Here are PostgreSQL 
installation instructions <a href="http://www.postgresqltutorial.com/install-postgresql/">for Windows</a> 
and <a href="http://www.indjango.com/ubuntu-install-postgresql-and-pgadmin/">for Ubuntu</a>. 
If you are Linux user and you feel adventureous you may try to
<a href="https://github.com/sameersbn/docker-postgresql">run PostgreSQL inside Docker container</a>.</p>

<p>One more thing if you decided to install PostgreSQL don’t forget to install
<a href="https://www.pgadmin.org/download/">pgAdmin</a>, this is great tool that helps you
manage your database:
<img src="assets/images/2016-06-22/pgadmin_gui.png" alt="pgAdmin GUI" /></p>

<h4 id="common-steps">Common steps</h4>

<h5 id="prepare-maven-project">Prepare Maven Project</h5>

<p>Let’s start with generating project structure using Maven:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">$ cd where/to/put/my/project/code

$ mvn archetype:generate -DgroupId=mc.hibernatetutorial \
-DartifactId=hibernateTutorial \
-DarchetypeArtifactId=maven-archetype-quickstart \
-DinteractiveMode=false</code></pre></figure>

<p>This will generate folder structure:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">$ tree hibernateTutorial/

hibernateTutorial/
|-- pom.xml
`-- src
    |-- main
    |   `-- java
    |       `-- mc
    |           `-- hibernatetutorial
    |               `-- App.java
    `-- test
        `-- java
            `-- mc
                `-- hibernatetutorial
                    `-- AppTest.java</code></pre></figure>

<p>Next we will need to create <code class="highlighter-rouge">resources</code> directory to hold Hibernate and Log4j configuration
files:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">$ mkdir hibernateTutorial/src/main/resources</code></pre></figure>

<p>Let’s check if everything is OK by compiling our project:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">$ cd hibernateTutorial/
$ mvn compile

....
[INFO] ------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------
....</code></pre></figure>

<p>Compilation was successful so it’s time to replace <code class="highlighter-rouge">pom.xml</code> file with:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>mc.hibernatetutorial<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>hibernateTutorial<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;name&gt;</span>hibernateTutorial<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;url&gt;</span>http://maven.apache.org<span class="nt">&lt;/url&gt;</span>

  <span class="nt">&lt;properties&gt;</span>
    <span class="nt">&lt;project.build.sourceEncoding&gt;</span>
        UTF-8
    <span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
  <span class="nt">&lt;/properties&gt;</span>

  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="c">&lt;!-- enable Java 8 support --&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>3.5.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;source&gt;</span>1.8<span class="nt">&lt;/source&gt;</span>
          <span class="nt">&lt;target&gt;</span>1.8<span class="nt">&lt;/target&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="c">&lt;!-- this plugin allows us to run 
           project using simple command:
           $ mvn exec:java --&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>exec-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>java<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;mainClass&gt;</span>mc.hibernatetutorial.App<span class="nt">&lt;/mainClass&gt;</span>
          <span class="nt">&lt;arguments&gt;&lt;/arguments&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/build&gt;</span>

  <span class="nt">&lt;dependencies&gt;</span>
    <span class="c">&lt;!-- Hibernate library --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>hibernate-entitymanager<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.1.0.Final<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="c">&lt;!-- needed if you want to use new java.time API --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>hibernate-java8<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.1.0.Final<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="c">&lt;!-- needed if you want to use javax.validation --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>hibernate-validator<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.2.4.Final<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="c">&lt;!-- needed if you want to use javax.validation --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>javax.el<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>javax.el-api<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>2.2.4<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="c">&lt;!-- PostgreSql driver, if you use another DB change
             this dependency --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.postgresql<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>postgresql<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>9.4.1208.jre7<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="c">&lt;!-- Log4j library --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>log4j<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>log4j<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.2.17<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure>

<p>Let’s check again if everything works by issuing commands:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">$ cd hibernateTutorial/
$ mvn compile
$ mvn exec:java</code></pre></figure>

<p>You should see “Hello, World!” printed among pile of log messages (<code class="highlighter-rouge">-q</code> mvn option
can be used suppress log messages).</p>

<p>Next we need to add <code class="highlighter-rouge">log4j.xml</code> configuration file to <code class="highlighter-rouge">src/main/resources</code> directory:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="cp">&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;</span>
<span class="nt">&lt;log4j:configuration</span> <span class="na">debug=</span><span class="s">"false"</span>
     <span class="na">xmlns:log4j=</span><span class="s">'http://jakarta.apache.org/log4j/'</span><span class="nt">&gt;</span>

    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"file"</span> 
                <span class="na">class=</span><span class="s">"org.apache.log4j.RollingFileAppender"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- name of log file: --&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"file"</span> <span class="na">value=</span><span class="s">"hibernate_tutorial.log"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">"org.apache.log4j.PatternLayout"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"ConversionPattern"</span>
                   <span class="na">value=</span><span class="s">"[%d{HH:mm:ss}] %m%n"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/layout&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>

    <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"console"</span> 
                <span class="na">class=</span><span class="s">"org.apache.log4j.ConsoleAppender"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"Target"</span> <span class="na">value=</span><span class="s">"System.out"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">"org.apache.log4j.PatternLayout"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"ConversionPattern"</span> 
                   <span class="na">value=</span><span class="s">"[%d{HH:mm:ss}] %m%n"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/layout&gt;</span>
    <span class="nt">&lt;/appender&gt;</span>

    <span class="c">&lt;!-- change log level to DEBUG
         if you want more detailed
         logs from Hibernate --&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.hibernate"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">"ERROR"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/logger&gt;</span>
    
    <span class="c">&lt;!-- log SQL queries executed by
         Hibernate library --&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.hibernate.SQL"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">"DEBUG"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/logger&gt;</span>

    <span class="c">&lt;!-- log values of SQL queries parameters --&gt;</span>
    <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.hibernate.type.descriptor.sql.BasicBinder"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">"TRACE"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/logger&gt;</span>

    <span class="nt">&lt;root&gt;</span>
        <span class="nt">&lt;level</span> <span class="na">value=</span><span class="s">"DEBUG"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"file"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"console"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/root&gt;</span>

<span class="nt">&lt;/log4j:configuration&gt;</span></code></pre></figure>

<p>Now we can use Log4j logger in our application:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// src/main/java/mc/hibernatetutorial/App.java</span>
<span class="kn">package</span> <span class="n">mc</span><span class="o">.</span><span class="na">hibernatetutorial</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.log4j.Logger</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> 
<span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> 
                        <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">App</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"Hello, World!"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>After <code class="highlighter-rouge">mvn compile</code> and <code class="highlighter-rouge">mvn exec:java -q</code> you should see message printed to
terminal and to <code class="highlighter-rouge">hibernate_tutorial.log</code> file in the project directory.</p>

<h5 id="prepare-database">Prepare database</h5>

<p>Before we start playing with Hibernate we should create separate
database user for our app. User account can be created from pgAdmin
by executing following SQL:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">create</span> <span class="k">user</span> <span class="n">huser</span> <span class="k">with</span> <span class="n">password</span> <span class="nv">`hpass`</span><span class="p">;</span></code></pre></figure>

<p>We will also create database dedicated for our app, named <code class="highlighter-rouge">tutorialdb</code>:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">create</span> <span class="k">database</span> <span class="n">tutorialdb</span><span class="p">;</span></code></pre></figure>

<p>And allow <code class="highlighter-rouge">huser</code> to create/modify/drop tables in <code class="highlighter-rouge">tutorialdb</code>:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">grant</span> <span class="k">all</span> <span class="k">privileges</span> <span class="k">on</span> <span class="k">database</span> <span class="n">tutorialdb</span> <span class="k">to</span> <span class="n">huser</span><span class="p">;</span></code></pre></figure>

<p>After executing these instructions you should be able to login as <code class="highlighter-rouge">huser</code>
and create table inside <code class="highlighter-rouge">tutorialdb</code> database.</p>

<p>INFO: When you try to connect to local PostgreSQL instance always specify
name of server as an IP address e.g. <code class="highlighter-rouge">127.0.0.1</code>, otherwise you may not be able
to login without tweaking PostgreSQL configuration 
(more details <a href="http://stackoverflow.com/questions/18664074/getting-error-peer-authentication-failed-for-user-postgres-when-trying-to-ge">here</a>).</p>

<h4 id="hello-world-in-vanilla-hibernate">Hello, World! in vanilla Hibernate</h4>

<p>Finally we may start playing with Hibernate ORM.
Let’s begin by creating Hibernate configuration file <code class="highlighter-rouge">hibernate_cfg.xml</code>
inside <code class="highlighter-rouge">src/main/resources</code> directory:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;hibernate-configuration&gt;</span>
  <span class="nt">&lt;session-factory&gt;</span>
    <span class="c">&lt;!-- Database connection settings --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.dialect"</span><span class="nt">&gt;</span>org.hibernate.dialect.PostgreSQL82Dialect<span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.connection.driver_class"</span><span class="nt">&gt;</span>org.postgresql.Driver<span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.connection.username"</span><span class="nt">&gt;</span>huser<span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.connection.password"</span><span class="nt">&gt;</span>hpass<span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.connection.url"</span><span class="nt">&gt;</span>jdbc:postgresql://127.0.0.1:5432/tutorialdb<span class="nt">&lt;/property&gt;</span>
    <span class="c">&lt;!-- JDBC connection pool (use the built-in) --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"connection.pool_size"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/property&gt;</span>
    <span class="c">&lt;!-- Disable the second-level cache  --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"cache.provider_class"</span><span class="nt">&gt;</span>org.hibernate.cache.internal.NoCacheProvider<span class="nt">&lt;/property&gt;</span>
    <span class="c">&lt;!-- Log SQL queries --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"format_sql"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/property&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"use_sql_comments"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/property&gt;</span>
    <span class="c">&lt;!-- Drop and re-create the database schema on startup --&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hbm2ddl.auto"</span><span class="nt">&gt;</span>create<span class="nt">&lt;/property&gt;</span>
    <span class="c">&lt;!-- MAPPINGS --&gt;</span>
    <span class="nt">&lt;mapping</span> <span class="na">class=</span><span class="s">"mc.hibernatetutorial.model.TestEntity"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/session-factory&gt;</span>
<span class="nt">&lt;/hibernate-configuration&gt;</span></code></pre></figure>

<p>This file can be quite complex, it contains various settings used by ORM.
The most important for us are:</p>

<ul>
  <li><code class="highlighter-rouge">hibernate.connection.username</code> and <code class="highlighter-rouge">hibernate.connection.password</code> - these
 properties contains credentials used to connect to database server</li>
  <li><code class="highlighter-rouge">hibernate.connection.url</code> - address of database server.
 The last part of url contains database name (in our case <code class="highlighter-rouge">tutorialdb</code>)</li>
  <li><code class="highlighter-rouge">format_sql</code> and <code class="highlighter-rouge">use_sql_comments</code> properties -  when set to <code class="highlighter-rouge">true</code> will force
 Hibernate to log SQL queries executed against database</li>
  <li><code class="highlighter-rouge">hbm2ddl.auto</code> property - when set to <code class="highlighter-rouge">create</code> will drop and recreate all tables
 in database at application start. This is useful when you are learning Hibernate
 but can be frustrating because all changes made by you to database will be lost
 when you run your application again. To disable this feature use <code class="highlighter-rouge">validate</code> as property
 value, this will only check if database contains all required tables but will not drop them.</li>
  <li><code class="highlighter-rouge">&lt;mapping /&gt;</code> elements - allow you to list all entity classes that you want
 to use with Hibernate. For now we list only single class:
 <code class="highlighter-rouge">mc.hibernatetutorial.model.TestEntity</code>.</li>
</ul>

<p>Next we must create our entity class <code class="highlighter-rouge">mc.hibernatetutorial.model.TestEntity</code>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// src/main/java/mc/hibernatetutorial/model/TestEntity.java</span>
<span class="kn">package</span> <span class="n">mc</span><span class="o">.</span><span class="na">hibernatetutorial</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.*</span><span class="o">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"test"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestEntity</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">unique</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">TestEntity</span><span class="o">()</span> <span class="o">{</span> <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Long</span> <span class="n">getId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="n">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="n">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"User id: %d, name: %s"</span><span class="o">,</span> <span class="n">getId</span><span class="o">(),</span> <span class="n">getName</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>The are two ways in which you may map entities using Hibernate: via annotations and via xml
files (with <code class="highlighter-rouge">.hbm.xml</code> extension). Annotations are more popular these days and so 
we will use them. First we mark our class as entity using <code class="highlighter-rouge">@Entity</code> annotation.
Then we specify table name that will hold <code class="highlighter-rouge">TestEntity</code> data (by default table name
is equal to class name) using <code class="highlighter-rouge">@Table</code> annotation. Every entity class must have
a primary key, we use <code class="highlighter-rouge">@Id</code> to mark one of class fields as key. We also use <code class="highlighter-rouge">@GeneratedValue</code>
annotation this will hint hibernate that we want database server to generate entity keys.
The last annotation that we use is <code class="highlighter-rouge">@Column</code>, we can use it to change column name for given
field or as in our example to set unique constrain.</p>

<p>Finally we may write code to save our <code class="highlighter-rouge">TestEntity</code> to database:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// src/main/java/mc/hibernatetutorial/App.java</span>
<span class="kn">package</span> <span class="n">mc</span><span class="o">.</span><span class="na">hibernatetutorial</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.log4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.Session</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.SessionFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.Transaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.boot.MetadataSources</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.boot.registry.StandardServiceRegistry</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.boot.registry.StandardServiceRegistryBuilder</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">mc.hibernatetutorial.model.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> 
<span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">App</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="c1">// read configuration and build session factory</span>
        <span class="kd">final</span> <span class="n">StandardServiceRegistry</span> <span class="n">registry</span> <span class="o">=</span>
                <span class="k">new</span> <span class="n">StandardServiceRegistryBuilder</span><span class="o">()</span>
                        <span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="s">"hibernate_cfg.xml"</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">build</span><span class="o">();</span>

        <span class="n">SessionFactory</span> <span class="n">sessionFactory</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">sessionFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MetadataSources</span><span class="o">(</span><span class="n">registry</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">buildMetadata</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">buildSessionFactory</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">StandardServiceRegistryBuilder</span><span class="o">.</span><span class="na">destroy</span><span class="o">(</span><span class="n">registry</span><span class="o">);</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"cannot create sessionFactory"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// create session, open transaction and save test entity to db</span>
        <span class="n">Session</span> <span class="n">session</span> <span class="o">=</span> <span class="n">sessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
        <span class="n">Transaction</span> <span class="n">tx</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">beginTransaction</span><span class="o">();</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">TestEntity</span> <span class="n">testEntity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TestEntity</span><span class="o">();</span>
            <span class="n">testEntity</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"super foo"</span><span class="o">);</span>

            <span class="n">session</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">testEntity</span><span class="o">);</span>
            <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">tx</span><span class="o">.</span><span class="na">rollback</span><span class="o">();</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"cannot commit transaction"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">finally</span> <span class="o">{</span>
            <span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="c1">// clean up</span>
        <span class="n">sessionFactory</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>We start by building <code class="highlighter-rouge">SessionFactory</code>, this is pretty boring stuff that needs to be done.
Notice how we are loading settings from our <code class="highlighter-rouge">hibernate_cfg.xml</code> file:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="n">StandardServiceRegistry</span> <span class="n">registry</span> <span class="o">=</span>
        <span class="k">new</span> <span class="n">StandardServiceRegistryBuilder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="s">"hibernate_cfg.xml"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span></code></pre></figure>

<p>Next we use <code class="highlighter-rouge">SessionFactory</code> to create new session (session may be treated as a implementation
of <a href="http://martinfowler.com/eaaCatalog/unitOfWork.html">Unit of Work</a> pattern, generally you should create session per transaction).
We use <code class="highlighter-rouge">beginTransaction()</code> to start new database transaction. Then we create our <code class="highlighter-rouge">TestEntity</code>
object, we set some properties and we save it to database using <code class="highlighter-rouge">session.persist()</code> call.
Next we commit transaction using <code class="highlighter-rouge">tx.commit()</code> and finally we are freeing session resources
using <code class="highlighter-rouge">session.close()</code>.</p>

<p>After <code class="highlighter-rouge">mvn compile</code> and <code class="highlighter-rouge">mvn exec:java</code> Hibernate should generated single table <code class="highlighter-rouge">test</code> in
our <code class="highlighter-rouge">tutorialdb</code> database, and should insert single row representing our 
<code class="highlighter-rouge">TestEntity</code> to that table.
You may want to dig into log messages to see actual SQL statements used to create table
and insert row. Here for example is generated SQL that inserted our <code class="highlighter-rouge">TestEntity</code> row:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="cm">/* insert mc.hibernatetutorial.model.TestEntity
    */</span> <span class="k">insert</span> 
    <span class="k">into</span>
        <span class="n">test</span>
        <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span> 
    <span class="k">values</span>
        <span class="p">(</span><span class="o">?</span><span class="p">,</span> <span class="o">?</span><span class="p">)</span>

<span class="n">binding</span> <span class="k">parameter</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">as</span> <span class="p">[</span><span class="n">VARCHAR</span><span class="p">]</span> <span class="o">-</span> <span class="p">[</span><span class="n">super</span> <span class="n">foo</span><span class="p">]</span>
<span class="n">binding</span> <span class="k">parameter</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">as</span> <span class="p">[</span><span class="n">BIGINT</span><span class="p">]</span> <span class="o">-</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span></code></pre></figure>

<p>Now we can start exploring more advanced Hibernate topics like
<a href="http://www.tutorialspoint.com/hibernate/hibernate_annotations.htm">mapping</a> or 
<a href="http://www.tutorialspoint.com/hibernate/hibernate_query_language.htm">querying</a>.</p>

<p>Code used in this tutorial: <a href="https://github.com/marcin-chwedczuk/java-hibernate-helloworld/tree/vanilla">https://github.com/marcin-chwedczuk/java-hibernate-helloworld/tree/vanilla</a></p>

<h4 id="hello-world-using-jpa">Hello, World! using JPA</h4>

<p>Now we may explore Hibernate ORM via Java Persistence API.
Let’s begin by creating JPA configuration file <code class="highlighter-rouge">persistence.xml</code>
inside <code class="highlighter-rouge">src/main/resources/META-INF</code> directory:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;persistence</span> <span class="na">xmlns=</span><span class="s">"http://xmlns.jcp.org/xml/ns/persistence"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">version=</span><span class="s">"2.1"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://xmlns.jcp.org/xml/ns/persistence                             http://xmlns.jcp.org/xml/ns/persistence_2_1.xsd"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;persistence-unit</span> <span class="na">name=</span><span class="s">"HelloWorldPU"</span> <span class="na">transaction-type=</span><span class="s">"RESOURCE_LOCAL"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!--
        MAPPINGS
    --&gt;</span>
    <span class="nt">&lt;class&gt;</span>mc.hibernatetutorial.model.TestEntity<span class="nt">&lt;/class&gt;</span>
    <span class="c">&lt;!-- Use only classes specified in MAPPINGS --&gt;</span>
    <span class="nt">&lt;exclude-unlisted-classes&gt;</span>true<span class="nt">&lt;/exclude-unlisted-classes&gt;</span>
    <span class="nt">&lt;properties&gt;</span>
      <span class="c">&lt;!-- Configuring JDBC properties --&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"javax.persistence.jdbc.url"</span> <span class="na">value=</span><span class="s">"jdbc:postgresql://127.0.0.1:5432/tutorialdb"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"javax.persistence.jdbc.user"</span> <span class="na">value=</span><span class="s">"huser"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"javax.persistence.jdbc.password"</span> <span class="na">value=</span><span class="s">"hpass"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"javax.persistence.jdbc.driver"</span> <span class="na">value=</span><span class="s">"org.postgresql.Driver"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.dialect"</span> <span class="na">value=</span><span class="s">"org.hibernate.dialect.PostgreSQL82Dialect"</span> <span class="nt">/&gt;</span>

      <span class="c">&lt;!-- Log SQL queries --&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.format_sql"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.use_sql_comments"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>

      <span class="c">&lt;!-- Drop and re-create the database schema on startup --&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"javax.persistence.schema-generation.database.action"</span> <span class="na">value=</span><span class="s">"drop-and-create"</span> <span class="nt">/&gt;</span>
       <span class="c">&lt;!-- Use only classes specified in MAPPINGS --&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"hibernate.archive.autodetection"</span> <span class="na">value=</span><span class="s">"none"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/properties&gt;</span>
  <span class="nt">&lt;/persistence-unit&gt;</span>
<span class="nt">&lt;/persistence&gt;</span></code></pre></figure>

<p>This file can be quite complex, it contains various settings used by ORM.
The most important for us are:</p>

<ul>
  <li><code class="highlighter-rouge">javax.persistence.jdbc.user</code> and <code class="highlighter-rouge">javax.persistence.jdbc.password</code> - these
 properties contains credentials used to connect to database server</li>
  <li><code class="highlighter-rouge">javax.persistence.jdbc.url</code> - address of database server.
 The last part of url contains database name (in our case <code class="highlighter-rouge">tutorialdb</code>)</li>
  <li><code class="highlighter-rouge">hibernate.format_sql</code> and <code class="highlighter-rouge">hibernate.use_sql_comments</code> properties -<br />
 when set to <code class="highlighter-rouge">true</code> will force
 Hibernate to log SQL queries executed against database</li>
  <li><code class="highlighter-rouge">javax.persistence.schema-generation.database.action</code> property - 
 when set to <code class="highlighter-rouge">drop-and-create</code> will drop and recreate all tables
 in database at application start. This is useful when you are learning Hibernate
 but can be frustrating because all changes made by you to database will be lost
 when you run your application again. To disable this feature use <code class="highlighter-rouge">none</code> as property
 value.</li>
  <li><code class="highlighter-rouge">&lt;class /&gt;</code> elements - allow you to list all entity classes that you want
 to use with Hibernate. For now we list only single class:
 <code class="highlighter-rouge">mc.hibernatetutorial.model.TestEntity</code>.</li>
</ul>

<p>Next we must create our entity class <code class="highlighter-rouge">mc.hibernatetutorial.model.TestEntity</code>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// src/main/java/mc/hibernatetutorial/model/TestEntity.java</span>
<span class="kn">package</span> <span class="n">mc</span><span class="o">.</span><span class="na">hibernatetutorial</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.*</span><span class="o">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"test"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestEntity</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">unique</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">TestEntity</span><span class="o">()</span> <span class="o">{</span> <span class="o">}</span>

    <span class="kd">public</span> <span class="n">Long</span> <span class="n">getId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="n">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="n">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="n">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"User id: %d, name: %s"</span><span class="o">,</span> <span class="n">getId</span><span class="o">(),</span> <span class="n">getName</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>JPA uses annotations to control how ORM maps classes to database tables and columns.
We mark <code class="highlighter-rouge">TestEntity</code> class as entity using <code class="highlighter-rouge">@Entity</code> annotation.
We specify table name that will hold <code class="highlighter-rouge">TestEntity</code> data (by default table name
is equal to class name) using <code class="highlighter-rouge">@Table</code> annotation. Every entity class must have
a primary key, we use <code class="highlighter-rouge">@Id</code> to mark one of class fields as key. We also use <code class="highlighter-rouge">@GeneratedValue</code>
annotation to hint ORM that we want database server to generate entity keys.
The last annotation that we use is <code class="highlighter-rouge">@Column</code>, we can use it to change column name for given
field or as in our example to set unique constrain.</p>

<p>Finally we may write code to save our <code class="highlighter-rouge">TestEntity</code> class to database:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// src/main/java/mc/hibernatetutorial/App.java</span>
<span class="kn">package</span> <span class="n">mc</span><span class="o">.</span><span class="na">hibernatetutorial</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.log4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.EntityManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.EntityManagerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.EntityTransaction</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Persistence</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">mc.hibernatetutorial.model.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> 
<span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">App</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="n">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"starting application...."</span><span class="o">);</span>

        <span class="kd">final</span> <span class="n">EntityManagerFactory</span> <span class="n">emf</span> <span class="o">=</span> 
                <span class="n">Persistence</span><span class="o">.</span><span class="na">createEntityManagerFactory</span><span class="o">(</span><span class="s">"HelloWorldPU"</span><span class="o">);</span>

        <span class="n">EntityManager</span> <span class="n">entityManager</span> <span class="o">=</span> <span class="n">emf</span><span class="o">.</span><span class="na">createEntityManager</span><span class="o">();</span>
        <span class="n">EntityTransaction</span> <span class="n">tx</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">();</span>
        <span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">TestEntity</span> <span class="n">testEntity</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TestEntity</span><span class="o">();</span>
            <span class="n">testEntity</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"super foo"</span><span class="o">);</span>    

            <span class="n">entityManager</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">testEntity</span><span class="o">);</span>
            <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"cannot commit transaction"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
            <span class="n">tx</span><span class="o">.</span><span class="na">rollback</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">finally</span> <span class="o">{</span>
            <span class="n">entityManager</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        
        <span class="n">emf</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>We start by building <code class="highlighter-rouge">EntityManagerFactory</code>, this will load our configuration
from <code class="highlighter-rouge">persistence.xml</code>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">final</span> <span class="n">EntityManagerFactory</span> <span class="n">emf</span> <span class="o">=</span> 
        <span class="n">Persistence</span><span class="o">.</span><span class="na">createEntityManagerFactory</span><span class="o">(</span><span class="s">"HelloWorldPU"</span><span class="o">);</span></code></pre></figure>

<p>Notice that we use name <code class="highlighter-rouge">HelloWorldPU</code>, the same as used in <code class="highlighter-rouge">&lt;persistence-unit /&gt;</code> element
in <code class="highlighter-rouge">persistence.xml</code>.</p>

<p>Next we use <code class="highlighter-rouge">EntityManagerFactory</code> to create new <code class="highlighter-rouge">EntityManger</code>
(entity manager may be treated as a implementation
of <a href="http://martinfowler.com/eaaCatalog/unitOfWork.html">Unit of Work</a> pattern, 
generally you should create one entity manager per transaction).
Next we use <code class="highlighter-rouge">entityManager.getTransaction()</code> and <code class="highlighter-rouge">tx.begin()</code> to start new database transaction. 
Then we create our <code class="highlighter-rouge">TestEntity</code>
object, we set some properties and we save it to database using <code class="highlighter-rouge">entityManager.persist()</code> call.
Next we commit transaction using <code class="highlighter-rouge">tx.commit()</code> and finally we are freeing resources
using <code class="highlighter-rouge">entityManager.close()</code>.</p>

<p>After <code class="highlighter-rouge">mvn compile</code> and <code class="highlighter-rouge">mvn exec:java</code> Hibernate should generated single table <code class="highlighter-rouge">test</code> in
our <code class="highlighter-rouge">tutorialdb</code> database, and should insert single row representing our 
<code class="highlighter-rouge">TestEntity</code> to that table.
You may want to dig into log messages to see actual SQL statements used to create table
and insert row. Here for example is generated SQL that inserted our <code class="highlighter-rouge">TestEntity</code> row:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="cm">/* insert mc.hibernatetutorial.model.TestEntity
    */</span> <span class="k">insert</span> 
    <span class="k">into</span>
        <span class="n">test</span>
        <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span> 
    <span class="k">values</span>
        <span class="p">(</span><span class="o">?</span><span class="p">,</span> <span class="o">?</span><span class="p">)</span>

<span class="n">binding</span> <span class="k">parameter</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">as</span> <span class="p">[</span><span class="n">VARCHAR</span><span class="p">]</span> <span class="o">-</span> <span class="p">[</span><span class="n">super</span> <span class="n">foo</span><span class="p">]</span>
<span class="n">binding</span> <span class="k">parameter</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">as</span> <span class="p">[</span><span class="n">BIGINT</span><span class="p">]</span> <span class="o">-</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span></code></pre></figure>

<p>Now we can start exploring more advanced Hibernate topics like
<a href="http://www.tutorialspoint.com/hibernate/hibernate_annotations.htm">mapping</a> or 
<a href="http://www.tutorialspoint.com/hibernate/hibernate_query_language.htm">querying</a>.</p>

<p>Code used in this tutorial: <a href="https://github.com/marcin-chwedczuk/java-hibernate-helloworld/tree/jpa">https://github.com/marcin-chwedczuk/java-hibernate-helloworld/tree/jpa</a></p>



        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/mc" style="background-image: url(/assets/images/mc.png)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/mc">marcin-chwedczuk</a></h4>
                
                
                    <p> A Programmer, A Geek, A Human</p>
                
                <div class="author-meta">
                    <span class="author-location icon-location"> Warsaw, Poland</span> 
                    <span class="author-link icon-link"><a href="https://marcin-chwedczuk.github.io/"> marcin-chwedczuk.github.io/</a></span> 
                </div>
            </section>

            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Hibernate hello world application&amp;url=https://marcin-chwedczuk.github.io/hibernate-hello-world-app"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://marcin-chwedczuk.github.io/hibernate-hello-world-app"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://marcin-chwedczuk.github.io/hibernate-hello-world-app"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            
                <div id="disqus_thread"></div>
<script>
    /**
    * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
    */
    
    var disqus_config = function () {
        this.page.url = 'https://marcin-chwedczuk.github.io//hibernate-hello-world-app';
        this.page.identifier = '/hibernate-hello-world-app';
    };
    
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    
    s.src = '//marcinchwedczukgithubio.disqus.com/embed.js';
    
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

            
            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/mc_cover2.jpg)" href="/find-cycle-start-in-singly-linked-list">
            <section class="post">
                <h2>Find cycle start in singly linked list</h2>
                <p>In this post I will present solution to the following problem: > We have a...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/cover7.jpg)" href="/get-day-of-week-from-date">
            <section class="post">
                <h2>Get day of week from date</h2>
                <p>Today we will try to solve the following problem: Given year, month and day tell...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Programming is Magic</a> &copy; 2018</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-82096342-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>
