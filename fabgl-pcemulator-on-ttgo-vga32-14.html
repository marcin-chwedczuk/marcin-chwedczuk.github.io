<!DOCTYPE html>
<html>
<head>
    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Page Meta -->
    <title>FabGL PCEmulator on TTGO VGA32 v1.4</title>
    <meta name="description" content="A place where I share my thoughts about programming." />

    <!-- Mobile Meta -->
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Brand icon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!-- Ghost outputs important style and meta data with this tag -->
        <link rel="canonical" href="http://blog.marcinchwedczuk.pl//fabgl-pcemulator-on-ttgo-vga32-14" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Programming is Magic" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="FabGL PCEmulator on TTGO VGA32 v1.4" />
    <meta property="og:description" content="A place where I share my thoughts about programming." />
    <meta property="og:url" content="http://blog.marcinchwedczuk.pl//fabgl-pcemulator-on-ttgo-vga32-14" />
    <meta property="og:image" content="/assets/images/mc_cover6.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="FabGL PCEmulator on TTGO VGA32 v1.4" />
    <meta name="twitter:description" content="A place where I share my thoughts about programming." />
    <meta name="twitter:url" content="http://blog.marcinchwedczuk.pl//fabgl-pcemulator-on-ttgo-vga32-14" />
    <meta name="twitter:image:src" content="/assets/images/mc_cover6.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Programming is Magic",
    "name": "FabGL PCEmulator on TTGO VGA32 v1.4",
    "url": "http://blog.marcinchwedczuk.pl//fabgl-pcemulator-on-ttgo-vga32-14",
    "image": "/assets/images/mc_cover6.jpg",
    "description": "A place where I share my thoughts about programming."
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Programming is Magic" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <!-- The blog navigation links -->
    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <!-- <li class="nav-about " role="presentation"><a href="/about">About</a></li> -->

        
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/java">
                    java (29)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: java -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/dotnet">
                    dotnet (11)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: dotnet -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/algorithms">
                    algorithms (7)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: algorithms -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/architecture">
                    architecture (7)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: architecture -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/scala">
                    scala (7)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: scala -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/javascript">
                    javascript (5)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: javascript -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/polish">
                    polish (5)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: polish -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/csharp">
                    csharp (4)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: csharp -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/elektronika">
                    elektronika (4)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: elektronika -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/hibernate">
                    hibernate (3)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: hibernate -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/linux">
                    linux (3)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: linux -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/unit-testing">
                    unit-testing (3)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: unit-testing -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/hardware-review">
                    hardware-review (2)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: hardware-review -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/cheatsheet">
                    cheatsheet (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: cheatsheet -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/ctf">
                    ctf (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: ctf -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/devcon">
                    devcon (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: devcon -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/eclipse">
                    eclipse (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: eclipse -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/electronics">
                    electronics (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: electronics -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/functional-programming">
                    functional-programming (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: functional-programming -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/git">
                    git (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: git -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/hacking">
                    hacking (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: hacking -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/hardware">
                    hardware (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: hardware -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/kotlin">
                    kotlin (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: kotlin -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/low-level">
                    low-level (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: low-level -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/other">
                    other (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: other -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/postman">
                    postman (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: postman -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/powershell">
                    powershell (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: powershell -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/regex">
                    regex (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: regex -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/security">
                    security (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: security -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/sql">
                    sql (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: sql -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/ssh">
                    ssh (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: ssh -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/tips">
                    tips (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: tips -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/vim">
                    vim (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: vim -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/windows">
                    windows (1)
                    <!-- fabgl-pcemulator-on-ttgo-vga32-14 name: windows -->
                </a>
            </li>
        

   </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->



<header class="main-header post-head " style="background-image: url(/assets/images/mc_cover6.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/home.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-test tag-content">

        <header class="post-header">
            <h1 class="post-title">FabGL PCEmulator on TTGO VGA32 v1.4</h1>
            <section class="post-meta">
            <!-- <a href='/'>mc</a> -->

            
                
                    <a href='/author/mc'>Marcin Chwedczuk</a>
                
            
            <time class="post-date" datetime="2021-09-02">02 Sep 2021</time>
                <!-- [[tags prefix=" on "]] -->
                
                on
                
                    
                       <a href='/tag/electronics'>Electronics</a>
                    
                
                
            </section>
        </header>

        <section class="post-content">

            <p>After waiting about 3 weeks I finally got my TTGO VGA32 v1.4 from Aliexpress.
Immediately, after getting my hands on the device I wanted to test it with <a href="https://github.com/fdivitto/FabGL">FabGL library</a>.
<img src="assets/images/2021-09-02/ttgo.png" alt="TTGO VGA32" /></p>

<p>NOTE: While powering the board using a USB 2.0 port, my 20+ year old PS/2 keyboard refused to work. Probably the USB port was
not able to source enough current. In the end I used a power supply designed for Raspbarry PI 3B. With that setup everything worked
correctly. USB 3.0 can source much more current than USB 2.0, but I did not test that setup.</p>

<p>It must be admitted that FabGL is compatible with TTGO VGA32 board, but only with version <code class="highlighter-rouge">v1.2</code>. 
Version <code class="highlighter-rouge">v1.4</code> has slightly different pinout (<code class="highlighter-rouge">MISO</code> and <code class="highlighter-rouge">MOSI</code> connections to SDCARD use different IO ports).
<img src="assets/images/2021-09-02/pinout.webp" alt="Pinout of VGA32" /></p>

<p>To run PCEmulator example we must edit PCEmulator source code:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"> <span class="cm">/* SIGNATURE:
      bool mountSDCard  ( bool  formatOnFail,
      char const *  mountPath,
      size_t  maxFiles = 4,
      int   allocationUnitSize = 16 * 1024,
      int   MISO = 16,
      int   MOSI = 17,
      int   CLK = 14,
      int   CS = 13
      )
   */</span>

  <span class="c1">// original: if (!FileBrowser::mountSDCard(false, "/SD", 8))
</span>  <span class="c1">// changed:
</span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">FileBrowser</span><span class="o">::</span><span class="n">mountSDCard</span><span class="p">(</span><span class="nb">false</span><span class="p">,</span> <span class="s">"/SD"</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="o">*</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">))</span>
    <span class="n">ibox</span><span class="p">.</span><span class="n">message</span><span class="p">(</span><span class="s">"Error!"</span><span class="p">,</span> <span class="s">"This app requires a SD-CARD!"</span><span class="p">,</span> <span class="n">nullptr</span><span class="p">,</span> <span class="n">nullptr</span><span class="p">);</span></code></pre></figure>

<p>Notice that now we will use ports 2 and 12 for <code class="highlighter-rouge">MISO</code> and <code class="highlighter-rouge">MOSI</code> lines.</p>

<p>After this change PCEmulator starts without any troubles. 
I could run Windows 3.11 and use all the provided programs:
<img src="assets/images/2021-09-02/win.png" alt="Windows 3.11 on TTGO VGA32" /></p>

<p>Although Windows 3.11 works as intended, it is working quite slow. 
It can take several seconds to e.g. open Excel, on the other hand you can comfortably play Reversi.
When it comes to provided DOS games, I had less luck. Most of them either froze the emulator or simply refuse to start.
Looks like there is still much work to be done on this project.</p>

<p>Anyway having a cheap, compatible, and ready to use board is very nice. 
With FabGL on top of it, I am sure I will have no troubles finding some good use of it.</p>

<p>Resources:</p>
<ul>
  <li><a href="https://github.com/LilyGO/FabGL/blob/master/Schematic/vga32_v1.4.pdf">TTGO VGA32 v1.4 Schematic</a></li>
  <li><a href="http://www.lilygo.cn/prod_view.aspx?TypeId=50033&amp;Id=1083&amp;FId=t3:50033:3">TTGO VGA32 Product Page</a></li>
</ul>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->
            
                
                    
                        <figure class="author-image">
                            <a class="img" href="/author/mc" style="background-image: url(/assets/images/mc.png)"><span class="hidden">mc's Picture</span></a>
                        </figure>
                    

                    <section class="author">
                        <h4><a href="/author/mc">Marcin Chwedczuk</a></h4>

                        
                            <p> A programmer, a geek, a human</p>
                        
                        <div class="author-meta">
                            <span class="author-location icon-location"> Warsaw, Poland</span>
                            <span class="author-link icon-link"><a href="http://marcinchwedczuk.pl"> http://marcinchwedczuk.pl</a></span>
                        </div>
                    </section>

                    <!-- /author  -->

                    <section class="share">
                        <h4>Share this post</h4>
                        <a class="icon-twitter" href="http://twitter.com/share?text=FabGL PCEmulator on TTGO VGA32 v1.4&amp;url=http://blog.marcinchwedczuk.plfabgl-pcemulator-on-ttgo-vga32-14"
                            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                            <span class="hidden">Twitter</span>
                        </a>
                        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.marcinchwedczuk.plfabgl-pcemulator-on-ttgo-vga32-14"
                            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                            <span class="hidden">Facebook</span>
                        </a>
                        <a class="icon-google-plus" href="https://plus.google.com/share?url=http://blog.marcinchwedczuk.plfabgl-pcemulator-on-ttgo-vga32-14"
                           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                            <span class="hidden">Google+</span>
                        </a>
                    </section>
                
            

            <!-- Add Disqus Comments -->
            
                <div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'marcinchwedczukgithubio'; // required: replace example with your forum shortname
        var disqus_identifier = '/fabgl-pcemulator-on-ttgo-vga32-14';
        var disqus_url = 'http://blog.marcinchwedczuk.pl/fabgl-pcemulator-on-ttgo-vga32-14';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

            

        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/mc_cover6.jpg)" href="/fabgl-pcemulator-na-esp32">
            <section class="post">
                <h2>FabGL PCEmulator na ESP32</h2>
                <p>Jakieś dwa tygodnie temu natknąłem się na artykuł Emulating the IBM PC on an ESP32. Opisano...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <!-- The tiny footer at the very bottom -->
        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Programming is Magic</a> &copy; 2021</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/jekyller/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- highlight.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- jQuery needs to come before `` so that jQuery can be used in code injection -->
    <script type="text/javascript" src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <!-- Ghost outputs important scripts and data with this tag -->
    <!--  -->
    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-82096342-1', 'auto');
	    ga('send', 'pageview');

     </script>
    <!-- Fitvids makes video embeds responsive and awesome -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <!-- The main JavaScript file for Casper -->
    <script type="text/javascript" src="/assets/js/index.js"></script>

</body>
</html>
