<!DOCTYPE html>
<html>
<head>
    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Page Meta -->
    <title>How to check if a number is a power of two</title>
    <meta name="description" content="A place where I share my thoughts about programming." />

    <!-- Mobile Meta -->
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Brand icon -->
    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!-- Ghost outputs important style and meta data with this tag -->
        <link rel="canonical" href="//how-to-check-if-a-number-is-a-power-of-two" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="Programming is Magic" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="How to check if a number is a power of two" />
    <meta property="og:description" content="A place where I share my thoughts about programming." />
    <meta property="og:url" content="//how-to-check-if-a-number-is-a-power-of-two" />
    <meta property="og:image" content="/assets/images/mc_cover4.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="How to check if a number is a power of two" />
    <meta name="twitter:description" content="A place where I share my thoughts about programming." />
    <meta name="twitter:url" content="//how-to-check-if-a-number-is-a-power-of-two" />
    <meta name="twitter:image:src" content="/assets/images/mc_cover4.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Programming is Magic",
    "name": "How to check if a number is a power of two",
    "url": "//how-to-check-if-a-number-is-a-power-of-two",
    "image": "/assets/images/mc_cover4.jpg",
    "description": "A place where I share my thoughts about programming."
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Programming is Magic" href="/feed.xml" />


</head>
<body class="home-template nav-closed">

    <!-- The blog navigation links -->
    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <!-- <li class="nav-about " role="presentation"><a href="/about">About</a></li> -->

        
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/java">
                    java (27)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: java -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/dotnet">
                    dotnet (11)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: dotnet -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/algorithms">
                    algorithms (7)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: algorithms -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/architecture">
                    architecture (7)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: architecture -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/javascript">
                    javascript (5)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: javascript -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/csharp">
                    csharp (4)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: csharp -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/hibernate">
                    hibernate (3)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: hibernate -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/linux">
                    linux (3)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: linux -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/scala">
                    scala (3)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: scala -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/unit-testing">
                    unit-testing (3)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: unit-testing -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/hardware-review">
                    hardware-review (2)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: hardware-review -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/devcon">
                    devcon (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: devcon -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/eclipse">
                    eclipse (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: eclipse -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/elektronika">
                    elektronika (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: elektronika -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/functional-programming">
                    functional-programming (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: functional-programming -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/git">
                    git (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: git -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/hacking">
                    hacking (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: hacking -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/hardware">
                    hardware (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: hardware -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/kotlin">
                    kotlin (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: kotlin -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/low-level">
                    low-level (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: low-level -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/other">
                    other (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: other -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/polish">
                    polish (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: polish -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/postman">
                    postman (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: postman -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/powershell">
                    powershell (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: powershell -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/regex">
                    regex (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: regex -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/security">
                    security (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: security -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/sql">
                    sql (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: sql -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/tips">
                    tips (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: tips -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/vim">
                    vim (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: vim -->
                </a>
            </li>
        
            
            
            <li class="nav-about " role="presentation">
                <a href="/tag/windows">
                    windows (1)
                    <!-- how-to-check-if-a-number-is-a-power-of-two name: windows -->
                </a>
            </li>
        

   </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->



<header class="main-header post-head " style="background-image: url(/assets/images/mc_cover4.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/"><img src="/assets/images/home.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-test tag-content">

        <header class="post-header">
            <h1 class="post-title">How to check if a number is a power of two</h1>
            <section class="post-meta">
            <!-- <a href='/'></a> -->

            
                
                    <a href='/author/mc'>Marcin Chwedczuk</a>
                
            
            <time class="post-date" datetime="2017-12-16">16 Dec 2017</time>
                <!-- [[tags prefix=" on "]] -->
                
                on
                
                    
                       <a href='/tag/algorithms'>Algorithms</a>
                    
                
                
            </section>
        </header>

        <section class="post-content">

            <p>In this blog post we will learn about two algorithms that
allow us to quickly check that a given integer is
a power of two. 
Both of these algorithms use only bit operators - they are
very efficient.</p>

<h4 id="algorithm-i">Algorithm I</h4>

<p>We will start by looking at the algorithm implementation,
then I will explain how it works:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="cm">/**
 * Checks if a {@code number} is a power of two.
 * &lt;p&gt;
 *     Zero and negative numbers are not considered powers of two.
 * &lt;/p&gt;
 * @param number any integer.
 * @return {@code true} when {@code number} is a power of two,
 *  {@code} false otherwise.
 */</span>
<span class="kt">boolean</span> <span class="nf">isPowerOfTwo</span><span class="o">(</span><span class="kt">int</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> 
        <span class="o">(</span> <span class="o">(</span><span class="n">number</span> <span class="o">&amp;</span> <span class="o">(-</span><span class="n">number</span><span class="o">))</span> <span class="o">==</span> <span class="n">number</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> 
        <span class="o">(</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>Before we move on it is a good time to remind ourselves that
along an algorithm implementation we 
should always specify the range of valid inputs 
and expected outputs.
In the code above I used Javadoc comments to state that our algorithm
accepts any number (positive, negative or zero) but it
considers only positive numbers to be powers of two.
For example <code class="highlighter-rouge">isPowerOfTwo(8)</code> should return <code class="highlighter-rouge">true</code> but 
<code class="highlighter-rouge">isPowerOfTwo(-16)</code> should return <code class="highlighter-rouge">false</code>.</p>

<p>Now let’s explain how the algorithm works.
If we look at the binary representation of the powers of
two we can see the following bit pattern - there is
only a single bit set:
<img src="assets/images/2017-12-16/powers_of_two.svg" alt="powers of two" /></p>

<p>Now comes the tricky part. Computers use 
<a href="https://en.wikipedia.org/wiki/Two%27s_complement">two’s complement</a>
encoding to efficiently store 
and perform operations on both positive and negative numbers.</p>

<p>To explain how two’s complement works we must first 
realise that pure binary encoding can only be used 
to store positive numbers:
<img src="assets/images/2017-12-16/b_17.svg" alt="binary representation of 17" />
One naive extension to pure binary encoding that supports
storing negative numbers is to
sacrifice MSB (the most significant bit) to represent number sign:
<img src="assets/images/2017-12-16/bsgn.svg" alt="Naive negative numbers" />
But this solution comes with its own problems,
for example we will end up with two different
bit patterns that represent the value of zero (<code class="highlighter-rouge">+0</code> and <code class="highlighter-rouge">-0</code>).
This also unnecessary complicates CPU design 
(we will need two different circuits to perform unsigned and signed
arithmetic) and reduces the range of
possible values that can be represented within a single byte
(again because zero is now unnecessarily 
represented by two distinct values).</p>

<p>Two’s complement encoding solves all these problem.
The main idea is to assign negative weight to the most significant
bit of the number, for example:
<img src="assets/images/2017-12-16/u2_17.svg" alt="binary representation of -17" />
The positive numbers have the same representation as they have in
pure binary encoding. There is also a simple procedure to negate a number,
first negate all bits and then add one to the result:
<img src="assets/images/2017-12-16/u2_neg.svg" alt="Twos complement negation" /></p>

<p>Above procedure works for all numbers except one - the maximum negative
value (<code class="highlighter-rouge">-128</code> for a single byte, <code class="highlighter-rouge">-2147483648</code> for a 4-byte <code class="highlighter-rouge">int</code>):
<img src="assets/images/2017-12-16/u2_min.svg" alt="Twos complement negation" />
This is the consequence of the fact that 
range of numbers that can be represented using two’s complement
is asymmetric around zero. For example in a single byte we can
represent values from <code class="highlighter-rouge">-128</code> up to <code class="highlighter-rouge">127</code>.</p>

<p>Since we are here it is also worth to mention that we may use
the same addition algorithm to add numbers encoded in pure
binary encoding and in two’s complement encoding.
Subtraction is also very easy. Say you want to subtract 
numbers <code class="highlighter-rouge">a</code> and <code class="highlighter-rouge">b</code>, you just negate <code class="highlighter-rouge">b</code> 
(using <code class="highlighter-rouge">NOT</code> and <code class="highlighter-rouge">INC</code> instructions) 
and then add it to <code class="highlighter-rouge">a</code>.</p>

<p>Now let’s go back to our algorithm.
Let’s assume that we have a number that is a power of two,
such a number has only one bit set. So we may assume that
our number <code class="highlighter-rouge">n</code> has form:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">0...010...0</code></pre></figure>

<p>As discussed above arithmetic negation is performed by first negating all
bits and then adding one, in our case:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">0...010...0
1...101...1 (NOT)
1...110...0 (+1)</code></pre></figure>

<p>As we can see <code class="highlighter-rouge">n</code> and <code class="highlighter-rouge">-n</code> share a single common bit, <code class="highlighter-rouge">AND</code>ing both
values yields:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">0...010...0  n
1...110...0 -n
AND
0...010...0 = n</code></pre></figure>

<p>So we ended up with the same value as we started. 
In other words <code class="highlighter-rouge">(n &amp; -n) == n</code> returns true.
This is illustrated for <code class="highlighter-rouge">n = 32</code> on the diagram below:
<img src="assets/images/2017-12-16/a1_w.svg" alt="How algorithm works for n=32" /></p>

<p>Now consider a number that is not a power of two, such a number
will have at least two bits set (we will deal with zero later).
We will divide number into three parts, the bits before first set
bit on the left, the bits after the last set bit on the right and the
middle bits. 
Let’s see what will happen when we use our algorithm on such a number:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">0..01?...?10..0 n
1..10?...?01..1 (NOT)
1..10?...?10..0 (+1) = -n</code></pre></figure>

<p>I used <code class="highlighter-rouge">?</code> to mark middle bits that can have any value.
The most important observation is that the leftmost set bit 
in <code class="highlighter-rouge">n</code> is cleared after negation.</p>

<p>Now let’s see what will be returned by <code class="highlighter-rouge">AND</code>:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">0..01?...?10..0  n
1..10?...?10..0 -n
AND
0..00?...?10..0 != n</code></pre></figure>

<p>As we can see all bits before <code class="highlighter-rouge">?</code> are cleared after performing <code class="highlighter-rouge">AND</code>
operation. This guarantees that <code class="highlighter-rouge">(n &amp; -n)</code> expression returns
different value than <code class="highlighter-rouge">n</code> which has one bit set before <code class="highlighter-rouge">?...?</code> bits.
And so <code class="highlighter-rouge">(n &amp; -n) == n</code> returns <code class="highlighter-rouge">false</code> as expected.</p>

<p>Diagram below illustrates how algorithm works for <code class="highlighter-rouge">n = 36</code>:
<img src="assets/images/2017-12-16/a1_w2.svg" alt="How algorithm works for n=36" /></p>

<p>There are two special values that need more attention.
One is of course zero which is handled explicitly by the condition
<code class="highlighter-rouge">(number &gt; 0)</code>. The other value is <code class="highlighter-rouge">Integer.MIN_VALUE</code>.
The <code class="highlighter-rouge">Integer.MIN_VALUE</code> may be treated either as a power of two
(it has only single bit in the binary representation) or not. 
This depends on how we want to tread <code class="highlighter-rouge">int</code> value in Java 
(as a singed number or as an unsigned one).
At the beginning we decided that our algorithm accepts negative values
and so <code class="highlighter-rouge">number</code> is a signed value.
To be consistent we again use <code class="highlighter-rouge">(number &gt; 0)</code> condition to return
<code class="highlighter-rouge">false</code> for <code class="highlighter-rouge">Integer.MIN_VALUE</code>.</p>

<h4 id="algorithm-ii">Algorithm II</h4>

<p>Again we will start with the implementation:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="cm">/**
 * Checks if a {@code number} is a power of two.
 * &lt;p&gt;
 *     Zero and negative numbers are not considered powers of two.
 * &lt;/p&gt;
 * @param number any integer.
 * @return {@code true} when {@code number} is a power of two,
 *  {@code} false otherwise.
 */</span>
<span class="kt">boolean</span> <span class="nf">isPowerOfTwo2</span><span class="o">(</span><span class="kt">int</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> 
        <span class="o">(</span> <span class="o">(</span><span class="n">number</span> <span class="o">&amp;</span> <span class="o">(</span><span class="n">number</span><span class="o">-</span><span class="mi">1</span><span class="o">))</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">)</span> <span class="o">&amp;&amp;</span> 
        <span class="o">(</span><span class="n">number</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span></code></pre></figure>

<p>This algorithm is much more simpler than previous one.
So how does it work?
We already know that numbers that are powers of two
have only single bit set in their binary representation:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">0..010..0</code></pre></figure>

<p>When we substract one from such a number we get:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">0..010..0 n
0..001..1 n-1</code></pre></figure>

<p>As we can see the leftmost bit of <code class="highlighter-rouge">n</code> is cleared
after subtraction. When we <code class="highlighter-rouge">AND</code> <code class="highlighter-rouge">n</code> and <code class="highlighter-rouge">n-1</code> 
we get zero:</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">0..010..0 n
0..001..1 n-1
0..000..0 (n AND n-1)</code></pre></figure>

<p>Numbers that are not powers of two (except zero)
have at least two bits set. Again we use our trick
with dividing number into three parts:
bits before first set bit, bits after last set bit and
the middle bits.</p>

<figure class="highlight"><pre><code class="language-no-highlight" data-lang="no-highlight">0..01?...?10..0 n
0..01?...?01..1 n-1
0..01?...?00000 (n AND n-1)</code></pre></figure>

<p>This shows us that the leftmost bit of <code class="highlighter-rouge">n</code> is not cleared by the <code class="highlighter-rouge">AND</code>
operation and so the final value cannot be equal to zero.</p>

<p>Two special cases for zero and maximum negative value are
handled in exactly the same way as in Algorithm I by <code class="highlighter-rouge">(number &gt; 0)</code>
condition.</p>

<p>Diagram below illustrates how Algorithm II works for <code class="highlighter-rouge">113</code>:
<img src="assets/images/2017-12-16/a2_w.svg" alt="How algorithm II works for 113" /></p>

<h4 id="versions-of-algorithm-i-and-ii-for-unsigned-numbers">Versions of algorithm I and II for unsigned numbers</h4>

<p>Some programming languages e.g. C# and C++ supports
unsigned numbers. Such numbers can only store zero and positive values.
We may use the fact that all values are non-negative to
simplify condition <code class="highlighter-rouge">(number &gt; 0)</code> into <code class="highlighter-rouge">(number != 0)</code> which
may be better optimized by some compilers.</p>

<p>It may be surprising that unsigned numbers support 
arithmetic negation operator <code class="highlighter-rouge">(-)</code>.
For them negation just means combination of <code class="highlighter-rouge">NOT</code> and <code class="highlighter-rouge">INC (+1)</code>
instructions that we described previously.</p>

<p>Here are versions of both algorithms that operate on unsigned
numbers in C#:</p>

<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">///     Checks if a &lt;paramref="number" /&gt; is a power of two.</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;remarks&gt;</span>
<span class="c1">///     Zero is not considered power of two.</span>
<span class="c1">/// &lt;/remarks&gt;</span>
<span class="c1">/// &lt;param name="number"&gt;Any unsigned value&lt;/param&gt;</span>
<span class="c1">/// &lt;returns&gt;</span>
<span class="c1">///     &lt;c&gt;true&lt;/c&gt; when &lt;c&gt;number&lt;/c&gt; is a power of two,</span>
<span class="c1">///     &lt;c&gt;false&lt;/c&gt; otherwise.</span>
<span class="c1">/// &lt;/returns&gt;</span>
<span class="kt">bool</span> <span class="nf">IsPowerOfTwo</span><span class="p">(</span><span class="kt">uint</span> <span class="n">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span>
        <span class="p">(</span> <span class="p">(</span><span class="n">number</span> <span class="p">&amp;</span> <span class="p">(-</span><span class="n">number</span><span class="p">))</span> <span class="p">==</span> <span class="n">number</span> <span class="p">)</span> <span class="p">&amp;&amp;</span>
        <span class="p">(</span><span class="n">number</span> <span class="p">!=</span> <span class="m">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">/// ... documentation ommited ...</span>
<span class="kt">bool</span> <span class="nf">IsPowerOfTwo2</span><span class="p">(</span><span class="kt">uint</span> <span class="n">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> 
        <span class="p">(</span> <span class="p">(</span><span class="n">number</span> <span class="p">&amp;</span> <span class="p">(</span><span class="n">number</span><span class="p">-</span><span class="m">1</span><span class="p">))</span> <span class="p">==</span> <span class="m">0</span> <span class="p">)</span> <span class="p">&amp;&amp;</span> 
        <span class="p">(</span><span class="n">number</span> <span class="p">!=</span> <span class="m">0</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h4 id="javsscript-peculiarities">JavsScript peculiarities</h4>

<p>JavaScript uses <code class="highlighter-rouge">double</code> type to represent all numbers.
<code class="highlighter-rouge">double</code>s are capable of accurately storing integers in range
<code class="highlighter-rouge">-2^53 .. +2^53</code>. Unfortunately when we perform bit operations
in JavaScript
both operands are first converted to 32 bit signed integers and
then operation proceeds.
This means that both presented algorithms will work in JS only 
for numbers in range <code class="highlighter-rouge">-2^30 .. +2^30-1</code>.
This is demonstrated by program:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">isPowerOfTwo</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span><span class="p">(</span> 
    <span class="p">(</span><span class="nx">number</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">-</span><span class="nx">number</span><span class="p">))</span> <span class="o">==</span> <span class="nx">number</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span><span class="nx">number</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">two_power_30</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
<span class="c1">// true</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isPowerOfTwo</span><span class="p">(</span><span class="nx">two_power_30</span><span class="p">));</span>

<span class="kd">let</span> <span class="nx">two_power_31</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">31</span><span class="p">);</span>
<span class="c1">// false</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isPowerOfTwo</span><span class="p">(</span><span class="nx">two_power_31</span><span class="p">));</span></code></pre></figure>



        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->
            
                
                    
                        <figure class="author-image">
                            <a class="img" href="/author/mc" style="background-image: url(/assets/images/mc.png)"><span class="hidden">mc's Picture</span></a>
                        </figure>
                    

                    <section class="author">
                        <h4><a href="/author/mc">Marcin Chwedczuk</a></h4>

                        
                            <p> A programmer, a geek, a human</p>
                        
                        <div class="author-meta">
                            <span class="author-location icon-location"> Warsaw, Poland</span>
                            <span class="author-link icon-link"><a href="http://marcinchwedczuk.pl"> http://marcinchwedczuk.pl</a></span>
                        </div>
                    </section>

                    <!-- /author  -->

                    <section class="share">
                        <h4>Share this post</h4>
                        <a class="icon-twitter" href="http://twitter.com/share?text=How to check if a number is a power of two&amp;url=how-to-check-if-a-number-is-a-power-of-two"
                            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                            <span class="hidden">Twitter</span>
                        </a>
                        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=how-to-check-if-a-number-is-a-power-of-two"
                            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                            <span class="hidden">Facebook</span>
                        </a>
                        <a class="icon-google-plus" href="https://plus.google.com/share?url=how-to-check-if-a-number-is-a-power-of-two"
                           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                            <span class="hidden">Google+</span>
                        </a>
                    </section>
                
            

            <!-- Add Disqus Comments -->
            
                <div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'marcinchwedczukgithubio'; // required: replace example with your forum shortname
        var disqus_identifier = '/how-to-check-if-a-number-is-a-power-of-two';
        var disqus_url = '/how-to-check-if-a-number-is-a-power-of-two';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

            

        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/assets/images/mc_cover4.jpg)" href="/dotnet-core-http-client-proxy-and-localhost">
            <section class="post">
                <h2>.NET Core, HttpClient, Proxy and localhost</h2>
                <p>Recently I wanted to spy network traffic between a `HttpClient` and a REST service. This...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/assets/images/mc_cover2.jpg)" href="/a-closer-look-at-portable-executable-msdos-stub">
            <section class="post">
                <h2>A closer look at Portable Executable MS-DOS Stub</h2>
                <p>When we open native or .NET windows executables in a hex-editor we can notice that...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <!-- The tiny footer at the very bottom -->
        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">Programming is Magic</a> &copy; 2020</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/jekyller/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- highlight.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- jQuery needs to come before `` so that jQuery can be used in code injection -->
    <script type="text/javascript" src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <!-- Ghost outputs important scripts and data with this tag -->
    <!--  -->
    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-82096342-1', 'auto');
	    ga('send', 'pageview');

     </script>
    <!-- Fitvids makes video embeds responsive and awesome -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <!-- The main JavaScript file for Casper -->
    <script type="text/javascript" src="/assets/js/index.js"></script>

</body>
</html>
